import React, {Component} from 'react';
import FloatingActionButton from 'material-ui/FloatingActionButton'
import RaisedButton from 'material-ui/RaisedButton';
import ContentAdd from 'material-ui/svg-icons/content/add'
import Dialog from 'material-ui/Dialog'
import TextField from 'material-ui/TextField'
import NumberInput from 'material-ui-number-input'
import SelectField from 'material-ui/SelectField';
import MenuItem from 'material-ui/MenuItem'
import Badge from 'material-ui/Badge';
import {Table, TableFooter, TableBody, TableHeader, TableHeaderColumn, TableRow, TableRowColumn} from 'material-ui/Table'
import {red500, orange500, lightBlue500, grey500} from 'material-ui/styles/colors'

const getScoreColor = (score) => {
	if (!score) {
		return grey500
	}
	if (score < 4) {
		return lightBlue500
	} 
	if (score < 8) {
		return orange500
	}
	return red500;
}

const VulnerabilityDialog = ({ dialog, onClose }) => {

	if (dialog.vulnerability.id) {
		return (
			<Dialog
	            open={dialog.open}
		        autoScrollBodyContent={true}
	            title={`Vulnerability ${dialog.vulnerability.id}`}
				onRequestClose={onClose}>
	        	<p>{dialog.vulnerability.description}</p>
	        	<strong>Attack vector: </strong> {dialog.vulnerability.vector}<br />
	        	<strong>Severity: </strong> <Badge
		            badgeContent={dialog.vulnerability.score}
		            badgeStyle={{top: 20, right: -5, backgroundColor: getScoreColor(dialog.vulnerability.score), fontSize: 11, color: '#fff'}}
		          >{dialog.vulnerability.severity}</Badge><br />
		        <strong>Published: </strong> {new Date(dialog.vulnerability.published).toString()}<br /><br />
		        <strong>Vulnerable products: </strong> <ul>{dialog.vulnerability.products.map((pr) => <li key={pr}>{pr}</li>)}</ul><br />
		        <strong>Refs: </strong> <ul>{dialog.vulnerability.refs.map((ref) => <li><a key={ref} href={ref} target="_blank" style={{color: grey500}}>{ref}</a></li>)}</ul>
	        	
	      </Dialog>
		)
	}
	return null;
}

export default VulnerabilityDialog